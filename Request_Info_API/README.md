# Request Info Microservice

## Developer

Name: Harshal Dhelia

Email: hdhelia@umass.edu

---
## Overview 
The Request Info microservice will allow logged in subletters to get information about the sublessor who has put out a post that the subletter is interested in and also send their information to the sublessor whose post they are interested in.  

---

## API end-points 


### HTTP methods

1. POST: Mark Interested 
    * **Route:** /posts/{postId}
    * **Description:** This endpoint sends the subletters information to the sublessor.
    * **Expected Data format sent:**
        ```json
        {
            "postId" : str,
	         "uid" : str,
	         "fname" : str,
	         "lname" : str,
	         "email" : str,
	         "phone" : str
        }
        ```
    * **Status_Code:** 
        * 200 when the subletters information is sent successfully. 
        * 404 when its unsuccessful. 

2. POST: Mark Not Interested 
    * **Route:** /posts/{postId}/NoLongerInterested
    * **Description:** This endpoint removes the subletter from a post that they are no longer interested in. 
    * **Expected Data format sent:**
        ```json
        {
            "pid" : str,
	         "uid" : str
        }
        ```
    * **Status_Code:** 
        * 200 when the subletter's id is removed from the list of interested users for a particular post. 
        * 404 when its unsuccessful.

      
3. GET: Get Owner Info
    * **Route:** /posts/{postid}
    * **Description:** This endpoint is to get the sublessor's information who uploaded the post. 
    * **Status_Code:** 
        * 200 when the sublessor's information is retreived successfully.
        * 404 when its unsuccessful.

4. POST: Get Event bus response
   * **Route:** /events
   * **Description:** Receives the response for the events generated by the microservice for the Event bus. 
   * **Status_Code:** 
        * 200 when the response is received succesfully. 
        * 404 when its unsuccessful.


## Messages sent and received via event bus

* Event: Mark Interested 

   **Sent**
   ```json
   {
   Type: "Mark_Interested"
   Data: 
   {
      "postId" : str,
      "uid" : str,
      "fname" : str,
      "lname" : str,
      "email" : str,
      "phone" : str
   }
   }
   ```
   **Received**
   "Received Event" message.

* Event: Mark Not Interested 
   
   **Sent**
   ```json
   {
   Type: "Mark_Not_Interested"
   Data: 
   {
      "pid" : str,
      "uid" : str
   }
   }
   ```
   **Received**
   "Received Event" message.

## Steps to build the service

1. In order to boot up the service you will need to have python3 installed 

2. In the terminal do the following:

```sh
cd Request_Info_API/
pip3 install pdm
pdm install
pdm run start_server
```

3. Install and Open Postman to run the above HTTP API endpoints. 
